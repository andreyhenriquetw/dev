<script>
  function startMutation() {
    const middle = document.getElementById('middle-text');
    const suffix = document.getElementById('suffix-text');

    if (!middle || !suffix) return;

    const runCycle = () => {
      // 1. Inicia encolhendo o "ndre" (Y encosta no A)
      middle.classList.add('collapsed');
      
      setTimeout(() => {
        // 2. Expande o "pslon" para fora do Y
        suffix.classList.remove('hidden-text');
        
        // 3. FICA PARADO EM "AYpslon" POR 5 SEGUNDOS
        setTimeout(() => {
          // 4. Encolhe o "pslon" de volta para o Y
          suffix.classList.add('hidden-text');
          
          setTimeout(() => {
            // 5. Expande o "ndre" original de volta
            middle.classList.remove('collapsed');
            
            // 6. ESPERA 5 SEGUNDOS EM "AndreY" ANTES DE RECOMEÇAR
            setTimeout(runCycle, 5000); 
            
          }, 800); // Tempo da animação de saída do pslon
        }, 5000); // Tempo de permanência no AYpslon
        
      }, 800); // Tempo da animação de encolhimento do ndre
    };

    // Inicia o primeiro ciclo após 5 segundos da página aberta
    setTimeout(runCycle, 5000);
  }

  // Garante o funcionamento com View Transitions do Astro
  document.addEventListener('astro:page-load', startMutation);
  // Fallback se não usar View Transitions
  if (!(window as any).astroPageLoadHandlerSet) {
    startMutation();
    (window as any).astroPageLoadHandlerSet = true;
  }
</script>

<style>
  /* Mantendo os estilos de animação fluida */
  .name-wrapper {
    display: inline-flex;
    align-items: center;
    overflow: hidden;
    vertical-align: bottom;
  }

  .expandable {
    display: inline-block;
    max-width: 150px; 
    opacity: 1;
    transition: max-width 0.8s cubic-bezier(0.4, 0, 0.2, 1), 
                opacity 0.6s ease, 
                transform 0.8s ease;
    white-space: nowrap;
  }

  .collapsed {
    max-width: 0px;
    opacity: 0;
    transform: scaleX(0); /* Melhora o efeito de "colher" */
    pointer-events: none;
  }

  .hidden-text {
    max-width: 0px;
    opacity: 0;
    transform: scaleX(0);
  }
</style>
